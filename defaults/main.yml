---
# environment variable
business_env: pro
# primary hostname for mgr
primary_hostname: mgr1
# defaults file for scheduler_job
install_dir: /var/local
basedir: "{{ install_dir }}/mysql"
shelldir: "{{ install_dir }}/shell"
monitordir: "{{ install_dir }}/monitor"
# Monitor info
channel_array: "adch task"
dingding_url: "oapi.dingtalk.com/robot/send?access_token=f333b3f832ac4e91f7906acb35eabbb538595e440c68b69cd71a25197509d509"
# Xtrabackup info
ssh_port: 22
local_port: 7733
remote_port: 3377
restore_host: mgr3
restore_array: "mgr2_20201209_170001_full mgr2_20201209_173001_incr"
backupdir: "/mysqlbackup"
datadir: "{{ basedir }}/data"
etcdir: "{{ basedir }}/etc"
logdir: "{{ basedir }}/log"
# Mysqldump info
dbname: dxz
binlog_index: "{{ datadir }}/mysql-bin.index"
restore_host: 10.0.64.6
restore_host_port: 58241
set_gtid_purged: 'off'
# Mysqlrestore info
restore_diff_database: True
restore_target_data_name: dxz414.sql
restore_target_data: "/tmp/{{ restore_target_data_name }}"
restore_target_database: test
# Mysql connection info
mysql_port: 3377
socket: /tmp/mysql.sock
# General mail info
scp_port: 59410
send_host: 172.21.0.38
recipient: rulei@jjl.cn
# Archive tables info
archive_dic: >
             [msg-center.mysql.rds.aliyuncs.com]="3306?msg-center?t_inside_notice_v2?third_type in ('couponGet','bountyGet','bountyGrab') AND create_date < DATE_FORMAT(DATE_SUB(CURRENT_DATE(),INTERVAL 30 day),'%Y-%m-%d 23:59:59')"
             [rm-2ze50s793579th5w4.mysql.rds.aliyuncs.com]="3306?xxl-job?xxl_job_log?trigger_time < DATE_FORMAT(DATE_SUB(CURRENT_DATE(),INTERVAL 30 day),'%Y-%m-%d 23:59:59')"
             [rm-2zef083ksgam56ysv.mysql.rds.aliyuncs.com]="3306?xxl-job?xxl_job_log?trigger_time < DATE_FORMAT(DATE_SUB(CURRENT_DATE(),INTERVAL 1 day),'%Y-%m-%d 23:59:59')"
             [rm-2zeefmb98v6f5qeuf.mysql.rds.aliyuncs.com]="3306?xxl-job?xxl_job_log?trigger_time < DATE_FORMAT(DATE_SUB(CURRENT_DATE(),INTERVAL 1 day),'%Y-%m-%d 23:59:59')"
             [rm-2zeefmb98v6f5qeuf.mysql.rds.aliyuncs.com]="3306?xxl-job-testb?xxl_job_log?trigger_time < DATE_FORMAT(DATE_SUB(CURRENT_DATE(),INTERVAL 1 day),'%Y-%m-%d 23:59:59')"
             [rm-2zeefmb98v6f5qeuf.mysql.rds.aliyuncs.com]="3306?xxl-job-testc?xxl_job_log?trigger_time < DATE_FORMAT(DATE_SUB(CURRENT_DATE(),INTERVAL 1 day),'%Y-%m-%d 23:59:59')"
             [rm-2ze0u3m4v2465z6rh.mysql.rds.aliyuncs.com]="3306?xxl-job?xxl_job_log?trigger_time < DATE_FORMAT(DATE_SUB(CURRENT_DATE(),INTERVAL 1 day),'%Y-%m-%d 23:59:59')"
arc_suffix: '`date +"%Y%m%d"`' #Archive data
drop_date: '`date +"%Y%m%d" -d "-5 days"`' #Keep data for a few days,include the current day